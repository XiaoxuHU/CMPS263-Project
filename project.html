<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>EE263 Project
    </title>
        <script src="echarts.min.js"></script>
        <script src="jquery-3.1.1.min.js"></script>
        <script>
            var e_provinces = ['shanghai', 'hebei', 'shanxi', 'inner mongolia', 'liaoning', 'jilin', 'heilongjiang', 'jiangsu', 'zhejiang', 'anhui', 'fujian', 'jiangxi', 'shandong', 'henan', 'hubei', 'hunan', 'guangdong', 'guangxi', 'hainan', 'sichuan', 'guizhou', 'yunnan', 'tibet', 'shannxi', 'gansu', 'qinghai', 'ningxia', 'xinjiang', 'beijing', 'tianjin', 'chongqing', 'taiwan'];
            var c_provinces = ['上海', '河北', '山西', '内蒙古', '辽宁', '吉林', '黑龙江', '江苏', '浙江', '安徽', '福建', '江西', '山东', '河南', '湖北', '湖南', '广东', '广西', '海南', '四川', '贵州', '云南', '西藏', '陕西', '甘肃', '青海', '宁夏', '新疆', '北京', '天津', '重庆', '台湾'];
            var temp;
            function translate(chinese) {
                for (var i = 0; i < c_provinces.length; i++) {
                    if (chinese == c_provinces[i]) {
                        temp = i;
                        return temp;
                    } else if (chinese == e_provinces[i]) {
                        temp = i;
                        return temp;
                    }
                }
            }
        </script>
        <style type="text/css">
            #china {
                float: left;
                width: 700px;
                height: 500px
            }

            #province {
                float: right;
                width: 500px;
                height: 500px
            }
        </style>
    </head>
    <body>
        <div id="china"></div>
        <script>
            var c_chart = echarts.init(document.getElementById('china'));
            $.get('map/json/china.json', function(chinaJson) {
                echarts.registerMap('china', chinaJson);

                c_chart.setOption({
                    series: [{
                        type: 'map',
                        map: 'china'
                    }]
                });
            });
            //点击
            var c_city;
            var e_city;
            c_chart.on('click', function(params) {
                c_city = params.name;
                e_city = e_provinces[translate(params.name)];
                document.getElementById('p_name').innerHTML = e_city;
                

            });
        </script>
        <p id="p_name"></p>
        <div id="province"></div>
        <script>
            c_chart.on('click', function(params) {

                $.get('map/json/' + e_city + '.json', function(geoJson) {
                    echarts.registerMap(c_city, geoJson);
                    var p_chart = echarts.init(document.getElementById('province'));
                    p_chart.setOption({
                        series: [{
                            type: 'map',
                            map: c_city
                        }]
                    });
                });
            })
        </script>
    </body>
</html>
